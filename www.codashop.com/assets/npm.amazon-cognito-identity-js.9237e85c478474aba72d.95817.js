(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["npm.amazon-cognito-identity-js"],{"4c44":function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return Ce})),n.d(t,"c",(function(){return De})),n.d(t,"d",(function(){return we})),n.d(t,"e",(function(){return xe})),n.d(t,"f",(function(){return Pe})),n.d(t,"g",(function(){return ze})),n.d(t,"h",(function(){return Ie})),n.d(t,"i",(function(){return Ze}));
/*!
 * Copyright 2016 Amazon.com,
 * Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Amazon Software License (the "License").
 * You may not use this file except in compliance with the
 * License. A copy of the License is located at
 *
 *     http://aws.amazon.com/asl/
 *
 * or in the "license" file accompanying this file. This file is
 * distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, express or implied. See the License
 * for the specific language governing permissions and
 * limitations under the License.
 */
var s=function(){function e(e){var t=e||{},n=t.ValidationData,s=t.Username,i=t.Password,r=t.AuthParameters,o=t.ClientMetadata;this.validationData=n||{},this.authParameters=r||{},this.clientMetadata=o||{},this.username=s,this.password=i}var t=e.prototype;return t.getUsername=function(){return this.username},t.getPassword=function(){return this.password},t.getValidationData=function(){return this.validationData},t.getAuthParameters=function(){return this.authParameters},t.getClientMetadata=function(){return this.clientMetadata},e}(),i=n("b639"),r=n("21bf"),o=n.n(r),a=(n("17e1"),n("94f8")),u=n.n(a),c=n("ed53"),h=n.n(c),l=n("e706");function f(e){for(var t=e.words,n=e.sigBytes,s=[],i=0;i<n;i++){var r=t[i>>>2]>>>24-i%4*8&255;s.push((r>>>4).toString(16)),s.push((15&r).toString(16))}return s.join("")}var d,g=function(){function e(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length}var t=e.prototype;return t.random=function(t){for(var n=[],s=0;s<t;s+=4)n.push(Object(l["a"])());return new e(n,t)},t.toString=function(){return f(this)},e}(),S=p;function p(e,t){null!=e&&this.fromString(e,t)}function v(){return new p(null)}var m=0xdeadbeefcafe,C=15715070==(16777215&m);function U(e,t,n,s,i,r){while(--r>=0){var o=t*this[e++]+n[s]+i;i=Math.floor(o/67108864),n[s++]=67108863&o}return i}function A(e,t,n,s,i,r){var o=32767&t,a=t>>15;while(--r>=0){var u=32767&this[e],c=this[e++]>>15,h=a*u+c*o;u=o*u+((32767&h)<<15)+n[s]+(1073741823&i),i=(u>>>30)+(h>>>15)+a*c+(i>>>30),n[s++]=1073741823&u}return i}function D(e,t,n,s,i,r){var o=16383&t,a=t>>14;while(--r>=0){var u=16383&this[e],c=this[e++]>>14,h=a*u+c*o;u=o*u+((16383&h)<<14)+n[s]+i,i=(u>>28)+(h>>14)+a*c,n[s++]=268435455&u}return i}var w="undefined"!==typeof navigator;w&&C&&"Microsoft Internet Explorer"==navigator.appName?(p.prototype.am=A,d=30):w&&C&&"Netscape"!=navigator.appName?(p.prototype.am=U,d=26):(p.prototype.am=D,d=28),p.prototype.DB=d,p.prototype.DM=(1<<d)-1,p.prototype.DV=1<<d;var y=52;p.prototype.FV=Math.pow(2,y),p.prototype.F1=y-d,p.prototype.F2=2*d-y;var T,I,E="0123456789abcdefghijklmnopqrstuvwxyz",F=new Array;for(T="0".charCodeAt(0),I=0;I<=9;++I)F[T++]=I;for(T="a".charCodeAt(0),I=10;I<36;++I)F[T++]=I;for(T="A".charCodeAt(0),I=10;I<36;++I)F[T++]=I;function k(e){return E.charAt(e)}function P(e,t){var n=F[e.charCodeAt(t)];return null==n?-1:n}function R(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function b(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0}function M(e){var t=v();return t.fromInt(e),t}function B(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");n=2}this.t=0,this.s=0;var s=e.length,i=!1,r=0;while(--s>=0){var o=P(e,s);o<0?"-"==e.charAt(s)&&(i=!0):(i=!1,0==r?this[this.t++]=o:r+n>this.DB?(this[this.t-1]|=(o&(1<<this.DB-r)-1)<<r,this[this.t++]=o>>this.DB-r):this[this.t-1]|=o<<r,r+=n,r>=this.DB&&(r-=this.DB))}this.clamp(),i&&p.ZERO.subTo(this,this)}function N(){var e=this.s&this.DM;while(this.t>0&&this[this.t-1]==e)--this.t}function x(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");t=2}var n,s=(1<<t)-1,i=!1,r="",o=this.t,a=this.DB-o*this.DB%t;if(o-- >0){a<this.DB&&(n=this[o]>>a)>0&&(i=!0,r=k(n));while(o>=0)a<t?(n=(this[o]&(1<<a)-1)<<t-a,n|=this[--o]>>(a+=this.DB-t)):(n=this[o]>>(a-=t)&s,a<=0&&(a+=this.DB,--o)),n>0&&(i=!0),i&&(r+=k(n))}return i?r:"0"}function O(){var e=v();return p.ZERO.subTo(this,e),e}function _(){return this.s<0?this.negate():this}function V(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(t=n-e.t,0!=t)return this.s<0?-t:t;while(--n>=0)if(0!=(t=this[n]-e[n]))return t;return 0}function K(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function q(){return this.t<=0?0:this.DB*(this.t-1)+K(this[this.t-1]^this.s&this.DM)}function H(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s}function W(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s}function J(e,t){var n,s=e%this.DB,i=this.DB-s,r=(1<<i)-1,o=Math.floor(e/this.DB),a=this.s<<s&this.DM;for(n=this.t-1;n>=0;--n)t[n+o+1]=this[n]>>i|a,a=(this[n]&r)<<s;for(n=o-1;n>=0;--n)t[n]=0;t[o]=a,t.t=this.t+o+1,t.s=this.s,t.clamp()}function L(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var s=e%this.DB,i=this.DB-s,r=(1<<s)-1;t[0]=this[n]>>s;for(var o=n+1;o<this.t;++o)t[o-n-1]|=(this[o]&r)<<i,t[o-n]=this[o]>>s;s>0&&(t[this.t-n-1]|=(this.s&r)<<i),t.t=this.t-n,t.clamp()}}function j(e,t){var n=0,s=0,i=Math.min(e.t,this.t);while(n<i)s+=this[n]-e[n],t[n++]=s&this.DM,s>>=this.DB;if(e.t<this.t){s-=e.s;while(n<this.t)s+=this[n],t[n++]=s&this.DM,s>>=this.DB;s+=this.s}else{s+=this.s;while(n<e.t)s-=e[n],t[n++]=s&this.DM,s>>=this.DB;s-=e.s}t.s=s<0?-1:0,s<-1?t[n++]=this.DV+s:s>0&&(t[n++]=s),t.t=n,t.clamp()}function G(e,t){var n=this.abs(),s=e.abs(),i=n.t;t.t=i+s.t;while(--i>=0)t[i]=0;for(i=0;i<s.t;++i)t[i+n.t]=n.am(0,s[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&p.ZERO.subTo(t,t)}function z(e){var t=this.abs(),n=e.t=2*t.t;while(--n>=0)e[n]=0;for(n=0;n<t.t-1;++n){var s=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,s,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()}function Y(e,t,n){var s=e.abs();if(!(s.t<=0)){var i=this.abs();if(i.t<s.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=v());var r=v(),o=this.s,a=e.s,u=this.DB-K(s[s.t-1]);u>0?(s.lShiftTo(u,r),i.lShiftTo(u,n)):(s.copyTo(r),i.copyTo(n));var c=r.t,h=r[c-1];if(0!=h){var l=h*(1<<this.F1)+(c>1?r[c-2]>>this.F2:0),f=this.FV/l,d=(1<<this.F1)/l,g=1<<this.F2,S=n.t,m=S-c,C=null==t?v():t;r.dlShiftTo(m,C),n.compareTo(C)>=0&&(n[n.t++]=1,n.subTo(C,n)),p.ONE.dlShiftTo(c,C),C.subTo(r,r);while(r.t<c)r[r.t++]=0;while(--m>=0){var U=n[--S]==h?this.DM:Math.floor(n[S]*f+(n[S-1]+g)*d);if((n[S]+=r.am(0,U,n,m,0,c))<U){r.dlShiftTo(m,C),n.subTo(C,n);while(n[S]<--U)n.subTo(C,n)}}null!=t&&(n.drShiftTo(c,t),o!=a&&p.ZERO.subTo(t,t)),n.t=c,n.clamp(),u>0&&n.rShiftTo(u,n),o<0&&p.ZERO.subTo(n,n)}}}function Z(e){var t=v();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(p.ZERO)>0&&e.subTo(t,t),t}function Q(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return t=t*(2-(15&e)*t)&15,t=t*(2-(255&e)*t)&255,t=t*(2-((65535&e)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function X(e){return 0==this.compareTo(e)}function $(e,t){var n=0,s=0,i=Math.min(e.t,this.t);while(n<i)s+=this[n]+e[n],t[n++]=s&this.DM,s>>=this.DB;if(e.t<this.t){s+=e.s;while(n<this.t)s+=this[n],t[n++]=s&this.DM,s>>=this.DB;s+=this.s}else{s+=this.s;while(n<e.t)s+=e[n],t[n++]=s&this.DM,s>>=this.DB;s+=e.s}t.s=s<0?-1:0,s>0?t[n++]=s:s<-1&&(t[n++]=this.DV+s),t.t=n,t.clamp()}function ee(e){var t=v();return this.addTo(e,t),t}function te(e){var t=v();return this.subTo(e,t),t}function ne(e){var t=v();return this.multiplyTo(e,t),t}function se(e){var t=v();return this.divRemTo(e,t,null),t}function ie(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function re(e){var t=v();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(p.ZERO)>0&&this.m.subTo(t,t),t}function oe(e){var t=v();return e.copyTo(t),this.reduce(t),t}function ae(e){while(e.t<=this.mt2)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],s=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;n=t+this.m.t,e[n]+=this.m.am(0,s,e,t,0,this.m.t);while(e[n]>=e.DV)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function ue(e,t){e.squareTo(t),this.reduce(t)}function ce(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function he(e,t,n){var s,i=e.bitLength(),r=M(1),o=new ie(t);if(i<=0)return r;s=i<18?1:i<48?3:i<144?4:i<768?5:6;var a=new Array,u=3,c=s-1,h=(1<<s)-1;if(a[1]=o.convert(this),s>1){var l=v();o.sqrTo(a[1],l);while(u<=h)a[u]=v(),o.mulTo(l,a[u-2],a[u]),u+=2}var f,d,g=e.t-1,S=!0,p=v();i=K(e[g])-1;while(g>=0){i>=c?f=e[g]>>i-c&h:(f=(e[g]&(1<<i+1)-1)<<c-i,g>0&&(f|=e[g-1]>>this.DB+i-c)),u=s;while(0==(1&f))f>>=1,--u;if((i-=u)<0&&(i+=this.DB,--g),S)a[f].copyTo(r),S=!1;else{while(u>1)o.sqrTo(r,p),o.sqrTo(p,r),u-=2;u>0?o.sqrTo(r,p):(d=r,r=p,p=d),o.mulTo(p,a[f],r)}while(g>=0&&0==(e[g]&1<<i))o.sqrTo(r,p),d=r,r=p,p=d,--i<0&&(i=this.DB-1,--g)}var m=o.revert(r);return n(null,m),m}
/*!
 * Copyright 2016 Amazon.com,
 * Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Amazon Software License (the "License").
 * You may not use this file except in compliance with the
 * License. A copy of the License is located at
 *
 *     http://aws.amazon.com/asl/
 *
 * or in the "license" file accompanying this file. This file is
 * distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, express or implied. See the License
 * for the specific language governing permissions and
 * limitations under the License.
 */
function le(e){return i["Buffer"].from((new g).random(e).toString(),"hex")}ie.prototype.convert=re,ie.prototype.revert=oe,ie.prototype.reduce=ae,ie.prototype.mulTo=ce,ie.prototype.sqrTo=ue,p.prototype.copyTo=R,p.prototype.fromInt=b,p.prototype.fromString=B,p.prototype.clamp=N,p.prototype.dlShiftTo=H,p.prototype.drShiftTo=W,p.prototype.lShiftTo=J,p.prototype.rShiftTo=L,p.prototype.subTo=j,p.prototype.multiplyTo=G,p.prototype.squareTo=z,p.prototype.divRemTo=Y,p.prototype.invDigit=Q,p.prototype.addTo=$,p.prototype.toString=x,p.prototype.negate=O,p.prototype.abs=_,p.prototype.compareTo=V,p.prototype.bitLength=q,p.prototype.mod=Z,p.prototype.equals=X,p.prototype.add=ee,p.prototype.subtract=te,p.prototype.multiply=ne,p.prototype.divide=se,p.prototype.modPow=he,p.ZERO=M(0),p.ONE=M(1);var fe=/^[89a-f]/i,de="FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",ge="userAttributes.",Se=function(){function e(e){this.N=new S(de,16),this.g=new S("2",16),this.k=new S(this.hexHash(""+this.padHex(this.N)+this.padHex(this.g)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue((function(){})),this.infoBits=i["Buffer"].from("Caldera Derived Key","utf8"),this.poolName=e}var t=e.prototype;return t.getSmallAValue=function(){return this.smallAValue},t.getLargeAValue=function(e){var t=this;this.largeAValue?e(null,this.largeAValue):this.calculateA(this.smallAValue,(function(n,s){n&&e(n,null),t.largeAValue=s,e(null,t.largeAValue)}))},t.generateRandomSmallA=function(){var e=le(128).toString("hex"),t=new S(e,16);return t},t.generateRandomString=function(){return le(40).toString("base64")},t.getRandomPassword=function(){return this.randomPassword},t.getSaltDevices=function(){return this.SaltToHashDevices},t.getVerifierDevices=function(){return this.verifierDevices},t.generateHashDevice=function(e,t,n){var s=this;this.randomPassword=this.generateRandomString();var i=""+e+t+":"+this.randomPassword,r=this.hash(i),o=le(16).toString("hex");this.SaltToHashDevices=this.padHex(new S(o,16)),this.g.modPow(new S(this.hexHash(this.SaltToHashDevices+r),16),this.N,(function(e,t){e&&n(e,null),s.verifierDevices=s.padHex(t),n(null,null)}))},t.calculateA=function(e,t){var n=this;this.g.modPow(e,this.N,(function(e,s){e&&t(e,null),s.mod(n.N).equals(S.ZERO)&&t(new Error("Illegal paramater. A mod N cannot be 0."),null),t(null,s)}))},t.calculateU=function(e,t){this.UHexHash=this.hexHash(this.padHex(e)+this.padHex(t));var n=new S(this.UHexHash,16);return n},t.hash=function(e){var t=e instanceof i["Buffer"]?o.a.lib.WordArray.create(e):e,n=u()(t).toString();return new Array(64-n.length).join("0")+n},t.hexHash=function(e){return this.hash(i["Buffer"].from(e,"hex"))},t.computehkdf=function(e,t){var n=o.a.lib.WordArray.create(i["Buffer"].concat([this.infoBits,i["Buffer"].from(String.fromCharCode(1),"utf8")])),s=e instanceof i["Buffer"]?o.a.lib.WordArray.create(e):e,r=t instanceof i["Buffer"]?o.a.lib.WordArray.create(t):t,a=h()(s,r),u=h()(n,a);return i["Buffer"].from(u.toString(),"hex").slice(0,16)},t.getPasswordAuthenticationKey=function(e,t,n,s,r){var o=this;if(n.mod(this.N).equals(S.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,n),this.UValue.equals(S.ZERO))throw new Error("U cannot be zero.");var a=""+this.poolName+e+":"+t,u=this.hash(a),c=new S(this.hexHash(this.padHex(s)+u),16);this.calculateS(c,n,(function(e,t){e&&r(e,null);var n=o.computehkdf(i["Buffer"].from(o.padHex(t),"hex"),i["Buffer"].from(o.padHex(o.UValue),"hex"));r(null,n)}))},t.calculateS=function(e,t,n){var s=this;this.g.modPow(e,this.N,(function(i,r){i&&n(i,null);var o=t.subtract(s.k.multiply(r));o.modPow(s.smallAValue.add(s.UValue.multiply(e)),s.N,(function(e,t){e&&n(e,null),n(null,t.mod(s.N))}))}))},t.getNewPasswordRequiredChallengeUserAttributePrefix=function(){return ge},t.padHex=function(e){if(!(e instanceof S))throw new Error("Not a BigInteger");var t=e.compareTo(S.ZERO)<0,n=e.abs().toString(16);if(n=n.length%2!==0?"0"+n:n,n=fe.test(n)?"00"+n:n,t){var s=n.split("").map((function(e){var t=15&~parseInt(e,16);return"0123456789ABCDEF".charAt(t)})).join(""),i=new S(s,16).add(S.ONE);n=i.toString(16),n.toUpperCase().startsWith("FF8")&&(n=n.substring(2))}return n},e}(),pe=function(){function e(e){this.jwtToken=e||"",this.payload=this.decodePayload()}var t=e.prototype;return t.getJwtToken=function(){return this.jwtToken},t.getExpiration=function(){return this.payload.exp},t.getIssuedAt=function(){return this.payload.iat},t.decodePayload=function(){var e=this.jwtToken.split(".")[1];try{return JSON.parse(i["Buffer"].from(e,"base64").toString("utf8"))}catch(t){return{}}},e}();function ve(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,me(e,t)}function me(e,t){return me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},me(e,t)}var Ce=function(e){function t(t){var n=void 0===t?{}:t,s=n.AccessToken;return e.call(this,s||"")||this}return ve(t,e),t}(pe);function Ue(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Ae(e,t)}function Ae(e,t){return Ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ae(e,t)}
/*!
 * Copyright 2016 Amazon.com,
 * Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Amazon Software License (the "License").
 * You may not use this file except in compliance with the
 * License. A copy of the License is located at
 *
 *     http://aws.amazon.com/asl/
 *
 * or in the "license" file accompanying this file. This file is
 * distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, express or implied. See the License
 * for the specific language governing permissions and
 * limitations under the License.
 */var De=function(e){function t(t){var n=void 0===t?{}:t,s=n.IdToken;return e.call(this,s||"")||this}return Ue(t,e),t}(pe),we=function(){function e(e){var t=void 0===e?{}:e,n=t.RefreshToken;this.token=n||""}var t=e.prototype;return t.getToken=function(){return this.token},e}(),ye=n("1132"),Te=n.n(ye),Ie=function(){function e(e){var t=void 0===e?{}:e,n=t.IdToken,s=t.RefreshToken,i=t.AccessToken,r=t.ClockDrift;if(null==i||null==n)throw new Error("Id token and Access Token must be present.");this.idToken=n,this.refreshToken=s,this.accessToken=i,this.clockDrift=void 0===r?this.calculateClockDrift():r}var t=e.prototype;return t.getIdToken=function(){return this.idToken},t.getRefreshToken=function(){return this.refreshToken},t.getAccessToken=function(){return this.accessToken},t.getClockDrift=function(){return this.clockDrift},t.calculateClockDrift=function(){var e=Math.floor(new Date/1e3),t=Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt());return e-t},t.isValid=function(){var e=Math.floor(new Date/1e3),t=e-this.clockDrift;return t<this.accessToken.getExpiration()&&t<this.idToken.getExpiration()},e}(),Ee=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Fe=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ke=function(){function e(){}var t=e.prototype;return t.getNowString=function(){var e=new Date,t=Fe[e.getUTCDay()],n=Ee[e.getUTCMonth()],s=e.getUTCDate(),i=e.getUTCHours();i<10&&(i="0"+i);var r=e.getUTCMinutes();r<10&&(r="0"+r);var o=e.getUTCSeconds();o<10&&(o="0"+o);var a=e.getUTCFullYear(),u=t+" "+n+" "+s+" "+i+":"+r+":"+o+" UTC "+a;return u},e}(),Pe=function(){function e(e){var t=void 0===e?{}:e,n=t.Name,s=t.Value;this.Name=n||"",this.Value=s||""}var t=e.prototype;return t.getValue=function(){return this.Value},t.setValue=function(e){return this.Value=e,this},t.getName=function(){return this.Name},t.setName=function(e){return this.Name=e,this},t.toString=function(){return JSON.stringify(this)},t.toJSON=function(){return{Name:this.Name,Value:this.Value}},e}(),Re={},be=function(){function e(){}return e.setItem=function(e,t){return Re[e]=t,Re[e]},e.getItem=function(e){return Object.prototype.hasOwnProperty.call(Re,e)?Re[e]:void 0},e.removeItem=function(e){return delete Re[e]},e.clear=function(){return Re={},Re},e}(),Me=function(){function e(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch(e){this.storageWindow=be}}var t=e.prototype;return t.getStorage=function(){return this.storageWindow},e}(),Be="undefined"!==typeof navigator,Ne=Be?navigator.userAgent:"nodejs",xe=function(){function e(e){if(null==e||null==e.Username||null==e.Pool)throw new Error("Username and Pool information are required.");this.username=e.Username||"",this.pool=e.Pool,this.Session=null,this.client=e.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=e.Storage||(new Me).getStorage(),this.keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),this.userDataKey=this.keyPrefix+"."+this.username+".userData"}var t=e.prototype;return t.setSignInUserSession=function(e){this.clearCachedUserData(),this.signInUserSession=e,this.cacheTokens()},t.getSignInUserSession=function(){return this.signInUserSession},t.getUsername=function(){return this.username},t.getAuthenticationFlowType=function(){return this.authenticationFlowType},t.setAuthenticationFlowType=function(e){this.authenticationFlowType=e},t.initiateAuth=function(e,t){var n=this,s=e.getAuthParameters();s.USERNAME=this.username;var i=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),r={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:s,ClientMetadata:i};this.getUserContextData()&&(r.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",r,(function(e,s){if(e)return t.onFailure(e);var i=s.ChallengeName,r=s.ChallengeParameters;return"CUSTOM_CHALLENGE"===i?(n.Session=s.Session,t.customChallenge(r)):(n.signInUserSession=n.getCognitoUserSession(s.AuthenticationResult),n.cacheTokens(),t.onSuccess(n.signInUserSession))}))},t.authenticateUser=function(e,t){return"USER_PASSWORD_AUTH"===this.authenticationFlowType?this.authenticateUserPlainUsernamePassword(e,t):"USER_SRP_AUTH"===this.authenticationFlowType||"CUSTOM_AUTH"===this.authenticationFlowType?this.authenticateUserDefaultAuth(e,t):t.onFailure(new Error("Authentication flow type is invalid."))},t.authenticateUserDefaultAuth=function(e,t){var n,s,r=this,a=new Se(this.pool.getUserPoolId().split("_")[1]),u=new ke,c={};null!=this.deviceKey&&(c.DEVICE_KEY=this.deviceKey),c.USERNAME=this.username,a.getLargeAValue((function(l,f){l&&t.onFailure(l),c.SRP_A=f.toString(16),"CUSTOM_AUTH"===r.authenticationFlowType&&(c.CHALLENGE_NAME="SRP_A");var d=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),g={AuthFlow:r.authenticationFlowType,ClientId:r.pool.getClientId(),AuthParameters:c,ClientMetadata:d};r.getUserContextData(r.username)&&(g.UserContextData=r.getUserContextData(r.username)),r.client.request("InitiateAuth",g,(function(c,l){if(c)return t.onFailure(c);var f=l.ChallengeParameters;r.username=f.USER_ID_FOR_SRP,r.userDataKey=r.keyPrefix+"."+r.username+".userData",n=new S(f.SRP_B,16),s=new S(f.SALT,16),r.getCachedDeviceKeyAndPassword(),a.getPasswordAuthenticationKey(r.username,e.getPassword(),n,s,(function(e,n){e&&t.onFailure(e);var s=u.getNowString(),c=o.a.lib.WordArray.create(i["Buffer"].concat([i["Buffer"].from(r.pool.getUserPoolId().split("_")[1],"utf8"),i["Buffer"].from(r.username,"utf8"),i["Buffer"].from(f.SECRET_BLOCK,"base64"),i["Buffer"].from(s,"utf8")])),g=o.a.lib.WordArray.create(n),S=Te.a.stringify(h()(c,g)),p={};p.USERNAME=r.username,p.PASSWORD_CLAIM_SECRET_BLOCK=f.SECRET_BLOCK,p.TIMESTAMP=s,p.PASSWORD_CLAIM_SIGNATURE=S,null!=r.deviceKey&&(p.DEVICE_KEY=r.deviceKey);var v=function e(t,n){return r.client.request("RespondToAuthChallenge",t,(function(s,i){return s&&"ResourceNotFoundException"===s.code&&-1!==s.message.toLowerCase().indexOf("device")?(p.DEVICE_KEY=null,r.deviceKey=null,r.randomPassword=null,r.deviceGroupKey=null,r.clearCachedDeviceKeyAndPassword(),e(t,n)):n(s,i)}))},m={ChallengeName:"PASSWORD_VERIFIER",ClientId:r.pool.getClientId(),ChallengeResponses:p,Session:l.Session,ClientMetadata:d};r.getUserContextData()&&(m.UserContextData=r.getUserContextData()),v(m,(function(e,n){return e?t.onFailure(e):r.authenticateUserInternal(n,a,t)}))}))}))}))},t.authenticateUserPlainUsernamePassword=function(e,t){var n=this,s={};if(s.USERNAME=this.username,s.PASSWORD=e.getPassword(),s.PASSWORD){var i=new Se(this.pool.getUserPoolId().split("_")[1]);this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(s.DEVICE_KEY=this.deviceKey);var r=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),o={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:s,ClientMetadata:r};this.getUserContextData(this.username)&&(o.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",o,(function(e,s){return e?t.onFailure(e):n.authenticateUserInternal(s,i,t)}))}else t.onFailure(new Error("PASSWORD parameter is required"))},t.authenticateUserInternal=function(e,t,n){var s=this,r=e.ChallengeName,o=e.ChallengeParameters;if("SMS_MFA"===r)return this.Session=e.Session,n.mfaRequired(r,o);if("SELECT_MFA_TYPE"===r)return this.Session=e.Session,n.selectMFAType(r,o);if("MFA_SETUP"===r)return this.Session=e.Session,n.mfaSetup(r,o);if("SOFTWARE_TOKEN_MFA"===r)return this.Session=e.Session,n.totpRequired(r,o);if("CUSTOM_CHALLENGE"===r)return this.Session=e.Session,n.customChallenge(o);if("NEW_PASSWORD_REQUIRED"===r){this.Session=e.Session;var a=null,u=null,c=[],h=t.getNewPasswordRequiredChallengeUserAttributePrefix();if(o&&(a=JSON.parse(e.ChallengeParameters.userAttributes),u=JSON.parse(e.ChallengeParameters.requiredAttributes)),u)for(var l=0;l<u.length;l++)c[l]=u[l].substr(h.length);return n.newPasswordRequired(a,c)}if("DEVICE_SRP_AUTH"!==r){this.signInUserSession=this.getCognitoUserSession(e.AuthenticationResult),this.challengeName=r,this.cacheTokens();var f=e.AuthenticationResult.NewDeviceMetadata;if(null==f)return n.onSuccess(this.signInUserSession);t.generateHashDevice(e.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,e.AuthenticationResult.NewDeviceMetadata.DeviceKey,(function(r){if(r)return n.onFailure(r);var o={Salt:i["Buffer"].from(t.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:i["Buffer"].from(t.getVerifierDevices(),"hex").toString("base64")};s.verifierDevices=o.PasswordVerifier,s.deviceGroupKey=f.DeviceGroupKey,s.randomPassword=t.getRandomPassword(),s.client.request("ConfirmDevice",{DeviceKey:f.DeviceKey,AccessToken:s.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:o,DeviceName:Ne},(function(t,i){return t?n.onFailure(t):(s.deviceKey=e.AuthenticationResult.NewDeviceMetadata.DeviceKey,s.cacheDeviceKeyAndPassword(),!0===i.UserConfirmationNecessary?n.onSuccess(s.signInUserSession,i.UserConfirmationNecessary):n.onSuccess(s.signInUserSession))}))}))}else this.getDeviceResponse(n)},t.completeNewPasswordChallenge=function(e,t,n,s){var i=this;if(!e)return n.onFailure(new Error("New password is required."));var r=new Se(this.pool.getUserPoolId().split("_")[1]),o=r.getNewPasswordRequiredChallengeUserAttributePrefix(),a={};t&&Object.keys(t).forEach((function(e){a[o+e]=t[e]})),a.NEW_PASSWORD=e,a.USERNAME=this.username;var u={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:a,Session:this.Session,ClientMetadata:s};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",u,(function(e,t){return e?n.onFailure(e):i.authenticateUserInternal(t,r,n)}))},t.getDeviceResponse=function(e,t){var n=this,s=new Se(this.deviceGroupKey),r=new ke,a={};a.USERNAME=this.username,a.DEVICE_KEY=this.deviceKey,s.getLargeAValue((function(u,c){u&&e.onFailure(u),a.SRP_A=c.toString(16);var l={ChallengeName:"DEVICE_SRP_AUTH",ClientId:n.pool.getClientId(),ChallengeResponses:a,ClientMetadata:t};n.getUserContextData()&&(l.UserContextData=n.getUserContextData()),n.client.request("RespondToAuthChallenge",l,(function(t,a){if(t)return e.onFailure(t);var u=a.ChallengeParameters,c=new S(u.SRP_B,16),l=new S(u.SALT,16);s.getPasswordAuthenticationKey(n.deviceKey,n.randomPassword,c,l,(function(t,s){if(t)return e.onFailure(t);var c=r.getNowString(),l=o.a.lib.WordArray.create(i["Buffer"].concat([i["Buffer"].from(n.deviceGroupKey,"utf8"),i["Buffer"].from(n.deviceKey,"utf8"),i["Buffer"].from(u.SECRET_BLOCK,"base64"),i["Buffer"].from(c,"utf8")])),f=o.a.lib.WordArray.create(s),d=Te.a.stringify(h()(l,f)),g={};g.USERNAME=n.username,g.PASSWORD_CLAIM_SECRET_BLOCK=u.SECRET_BLOCK,g.TIMESTAMP=c,g.PASSWORD_CLAIM_SIGNATURE=d,g.DEVICE_KEY=n.deviceKey;var S={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:n.pool.getClientId(),ChallengeResponses:g,Session:a.Session};n.getUserContextData()&&(S.UserContextData=n.getUserContextData()),n.client.request("RespondToAuthChallenge",S,(function(t,s){return t?e.onFailure(t):(n.signInUserSession=n.getCognitoUserSession(s.AuthenticationResult),n.cacheTokens(),e.onSuccess(n.signInUserSession))}))}))}))}))},t.confirmRegistration=function(e,t,n,s){var i={ClientId:this.pool.getClientId(),ConfirmationCode:e,Username:this.username,ForceAliasCreation:t,ClientMetadata:s};this.getUserContextData()&&(i.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",i,(function(e){return e?n(e,null):n(null,"SUCCESS")}))},t.sendCustomChallengeAnswer=function(e,t,n){var s=this,i={};i.USERNAME=this.username,i.ANSWER=e;var r=new Se(this.pool.getUserPoolId().split("_")[1]);this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(i.DEVICE_KEY=this.deviceKey);var o={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:i,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:n};this.getUserContextData()&&(o.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",o,(function(e,n){return e?t.onFailure(e):s.authenticateUserInternal(n,r,t)}))},t.sendMFACode=function(e,t,n,s){var r=this,o={};o.USERNAME=this.username,o.SMS_MFA_CODE=e;var a=n||"SMS_MFA";"SOFTWARE_TOKEN_MFA"===a&&(o.SOFTWARE_TOKEN_MFA_CODE=e),null!=this.deviceKey&&(o.DEVICE_KEY=this.deviceKey);var u={ChallengeName:a,ChallengeResponses:o,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:s};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",u,(function(e,n){if(e)return t.onFailure(e);var s=n.ChallengeName;if("DEVICE_SRP_AUTH"!==s){if(r.signInUserSession=r.getCognitoUserSession(n.AuthenticationResult),r.cacheTokens(),null==n.AuthenticationResult.NewDeviceMetadata)return t.onSuccess(r.signInUserSession);var o=new Se(r.pool.getUserPoolId().split("_")[1]);o.generateHashDevice(n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,n.AuthenticationResult.NewDeviceMetadata.DeviceKey,(function(e){if(e)return t.onFailure(e);var s={Salt:i["Buffer"].from(o.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:i["Buffer"].from(o.getVerifierDevices(),"hex").toString("base64")};r.verifierDevices=s.PasswordVerifier,r.deviceGroupKey=n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,r.randomPassword=o.getRandomPassword(),r.client.request("ConfirmDevice",{DeviceKey:n.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:r.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:s,DeviceName:Ne},(function(e,s){return e?t.onFailure(e):(r.deviceKey=n.AuthenticationResult.NewDeviceMetadata.DeviceKey,r.cacheDeviceKeyAndPassword(),!0===s.UserConfirmationNecessary?t.onSuccess(r.signInUserSession,s.UserConfirmationNecessary):t.onSuccess(r.signInUserSession))}))}))}else r.getDeviceResponse(t)}))},t.changePassword=function(e,t,n,s){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:e,ProposedPassword:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:s},(function(e){return e?n(e,null):n(null,"SUCCESS")}))},t.enableMFA=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);var t=[],n={DeliveryMedium:"SMS",AttributeName:"phone_number"};t.push(n),this.client.request("SetUserSettings",{MFAOptions:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t){return t?e(t,null):e(null,"SUCCESS")}))},t.setUserMfaPreference=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:e,SoftwareTokenMfaSettings:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(e){return e?n(e,null):n(null,"SUCCESS")}))},t.disableMFA=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);var t=[];this.client.request("SetUserSettings",{MFAOptions:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t){return t?e(t,null):e(null,"SUCCESS")}))},t.deleteUser=function(e,t){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:t},(function(t){return t?e(t,null):(n.clearCachedUser(),e(null,"SUCCESS"))}))},t.updateAttributes=function(e,t,n){var s=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:e,ClientMetadata:n},(function(e){return e?t(e,null):s.getUserData((function(){return t(null,"SUCCESS")}),{bypassCache:!0})}))},t.getUserAttributes=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t,n){if(t)return e(t,null);for(var s=[],i=0;i<n.UserAttributes.length;i++){var r={Name:n.UserAttributes[i].Name,Value:n.UserAttributes[i].Value},o=new Pe(r);s.push(o)}return e(null,s)}))},t.getMFAOptions=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t,n){return t?e(t,null):e(null,n.MFAOptions)}))},t.createGetUserRequest=function(){return this.client.promisifyRequest("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()})},t.refreshSessionIfPossible=function(e){var t=this;return void 0===e&&(e={}),new Promise((function(n){var s=t.signInUserSession.getRefreshToken();s&&s.getToken()?t.refreshSession(s,n,e.clientMetadata):n()}))},t.getUserData=function(e,t){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return this.clearCachedUserData(),e(new Error("User is not authenticated"),null);var s=this.getUserDataFromCache();if(s)if(this.isFetchUserDataAndTokenRequired(t))this.fetchUserData().then((function(e){return n.refreshSessionIfPossible(t).then((function(){return e}))})).then((function(t){return e(null,t)}))["catch"](e);else try{return void e(null,JSON.parse(s))}catch(i){return this.clearCachedUserData(),void e(i,null)}else this.fetchUserData().then((function(t){e(null,t)}))["catch"](e)},t.getUserDataFromCache=function(){var e=this.storage.getItem(this.userDataKey);return e},t.isFetchUserDataAndTokenRequired=function(e){var t=e||{},n=t.bypassCache,s=void 0!==n&&n;return s},t.fetchUserData=function(){var e=this;return this.createGetUserRequest().then((function(t){return e.cacheUserData(t),t}))},t.deleteAttributes=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(e){return e?t(e,null):t(null,"SUCCESS")}))},t.resendConfirmationCode=function(e,t){var n={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:t};this.client.request("ResendConfirmationCode",n,(function(t,n){return t?e(t,null):e(null,n)}))},t.getSession=function(e,t){if(void 0===t&&(t={}),null==this.username)return e(new Error("Username is null. Cannot retrieve a new session"),null);if(null!=this.signInUserSession&&this.signInUserSession.isValid())return e(null,this.signInUserSession);var n="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,s=n+".idToken",i=n+".accessToken",r=n+".refreshToken",o=n+".clockDrift";if(this.storage.getItem(s)){var a=new De({IdToken:this.storage.getItem(s)}),u=new Ce({AccessToken:this.storage.getItem(i)}),c=new we({RefreshToken:this.storage.getItem(r)}),h=parseInt(this.storage.getItem(o),0)||0,l={IdToken:a,AccessToken:u,RefreshToken:c,ClockDrift:h},f=new Ie(l);if(f.isValid())return this.signInUserSession=f,e(null,this.signInUserSession);if(!c.getToken())return e(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(c,e,t.clientMetadata)}else e(new Error("Local storage is missing an ID Token, Please authenticate"),null)},t.refreshSession=function(e,t,n){var s=this,i=this.pool.wrapRefreshSessionCallback?this.pool.wrapRefreshSessionCallback(t):t,r={};r.REFRESH_TOKEN=e.getToken();var o="CognitoIdentityServiceProvider."+this.pool.getClientId(),a=o+".LastAuthUser";if(this.storage.getItem(a)){this.username=this.storage.getItem(a);var u=o+"."+this.username+".deviceKey";this.deviceKey=this.storage.getItem(u),r.DEVICE_KEY=this.deviceKey}var c={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:r,ClientMetadata:n};this.getUserContextData()&&(c.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",c,(function(t,n){if(t)return"NotAuthorizedException"===t.code&&s.clearCachedUser(),i(t,null);if(n){var r=n.AuthenticationResult;return Object.prototype.hasOwnProperty.call(r,"RefreshToken")||(r.RefreshToken=e.getToken()),s.signInUserSession=s.getCognitoUserSession(r),s.cacheTokens(),i(null,s.signInUserSession)}}))},t.cacheTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),t=e+"."+this.username+".idToken",n=e+"."+this.username+".accessToken",s=e+"."+this.username+".refreshToken",i=e+"."+this.username+".clockDrift",r=e+".LastAuthUser";this.storage.setItem(t,this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(n,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(s,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(i,""+this.signInUserSession.getClockDrift()),this.storage.setItem(r,this.username)},t.cacheUserData=function(e){this.storage.setItem(this.userDataKey,JSON.stringify(e))},t.clearCachedUserData=function(){this.storage.removeItem(this.userDataKey)},t.clearCachedUser=function(){this.clearCachedTokens(),this.clearCachedUserData()},t.cacheDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",s=e+".deviceGroupKey";this.storage.setItem(t,this.deviceKey),this.storage.setItem(n,this.randomPassword),this.storage.setItem(s,this.deviceGroupKey)},t.getCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",s=e+".deviceGroupKey";this.storage.getItem(t)&&(this.deviceKey=this.storage.getItem(t),this.randomPassword=this.storage.getItem(n),this.deviceGroupKey=this.storage.getItem(s))},t.clearCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",s=e+".deviceGroupKey";this.storage.removeItem(t),this.storage.removeItem(n),this.storage.removeItem(s)},t.clearCachedTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),t=e+"."+this.username+".idToken",n=e+"."+this.username+".accessToken",s=e+"."+this.username+".refreshToken",i=e+".LastAuthUser",r=e+"."+this.username+".clockDrift";this.storage.removeItem(t),this.storage.removeItem(n),this.storage.removeItem(s),this.storage.removeItem(i),this.storage.removeItem(r)},t.getCognitoUserSession=function(e){var t=new De(e),n=new Ce(e),s=new we(e),i={IdToken:t,AccessToken:n,RefreshToken:s};return new Ie(i)},t.forgotPassword=function(e,t){var n={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:t};this.getUserContextData()&&(n.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",n,(function(t,n){return t?e.onFailure(t):"function"===typeof e.inputVerificationCode?e.inputVerificationCode(n):e.onSuccess(n)}))},t.confirmPassword=function(e,t,n,s){var i={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:e,Password:t,ClientMetadata:s};this.getUserContextData()&&(i.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",i,(function(e){return e?n.onFailure(e):n.onSuccess()}))},t.getAttributeVerificationCode=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:n},(function(e,n){return e?t.onFailure(e):"function"===typeof t.inputVerificationCode?t.inputVerificationCode(n):t.onSuccess()}))},t.verifyAttribute=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:e,Code:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(e){return e?n.onFailure(e):n.onSuccess("SUCCESS")}))},t.getDevice=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},(function(t,n){return t?e.onFailure(t):e.onSuccess(n)}))},t.forgetSpecificDevice=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:e},(function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")}))},t.forgetDevice=function(e){var t=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:e.onFailure,onSuccess:function(n){return t.deviceKey=null,t.deviceGroupKey=null,t.randomPassword=null,t.clearCachedDeviceKeyAndPassword(),e.onSuccess(n)}})},t.setDeviceStatusRemembered=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},(function(t){return t?e.onFailure(t):e.onSuccess("SUCCESS")}))},t.setDeviceStatusNotRemembered=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},(function(t){return t?e.onFailure(t):e.onSuccess("SUCCESS")}))},t.listDevices=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));var s={AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:e};t&&(s.PaginationToken=t),this.client.request("ListDevices",s,(function(e,t){return e?n.onFailure(e):n.onSuccess(t)}))},t.globalSignOut=function(e){var t=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(n){return n?e.onFailure(n):(t.clearCachedUser(),e.onSuccess("SUCCESS"))}))},t.signOut=function(){this.signInUserSession=null,this.clearCachedUser()},t.sendMFASelectionAnswer=function(e,t){var n=this,s={};s.USERNAME=this.username,s.ANSWER=e;var i={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:s,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(i.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",i,(function(s,i){return s?t.onFailure(s):(n.Session=i.Session,"SMS_MFA"===e?t.mfaRequired(i.ChallengeName,i.ChallengeParameters):"SOFTWARE_TOKEN_MFA"===e?t.totpRequired(i.ChallengeName,i.ChallengeParameters):void 0)}))},t.getUserContextData=function(){var e=this.pool;return e.getUserContextData(this.username)},t.associateSoftwareToken=function(e){var t=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t,n){return t?e.onFailure(t):e.associateSecretCode(n.SecretCode)})):this.client.request("AssociateSoftwareToken",{Session:this.Session},(function(n,s){return n?e.onFailure(n):(t.Session=s.Session,e.associateSecretCode(s.SecretCode))}))},t.verifySoftwareToken=function(e,t,n){var s=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:e,FriendlyDeviceName:t},(function(e,t){return e?n.onFailure(e):n.onSuccess(t)})):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:e,FriendlyDeviceName:t},(function(e,t){if(e)return n.onFailure(e);s.Session=t.Session;var i={};i.USERNAME=s.username;var r={ChallengeName:"MFA_SETUP",ClientId:s.pool.getClientId(),ChallengeResponses:i,Session:s.Session};s.getUserContextData()&&(r.UserContextData=s.getUserContextData()),s.client.request("RespondToAuthChallenge",r,(function(e,t){return e?n.onFailure(e):(s.signInUserSession=s.getCognitoUserSession(t.AuthenticationResult),s.cacheTokens(),n.onSuccess(s.signInUserSession))}))}))},e}();
/*!
 * Copyright 2016 Amazon.com,
 * Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Amazon Software License (the "License").
 * You may not use this file except in compliance with the
 * License. A copy of the License is located at
 *
 *     http://aws.amazon.com/asl/
 *
 * or in the "license" file accompanying this file. This file is
 * distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, express or implied. See the License
 * for the specific language governing permissions and
 * limitations under the License.
 */n("ce08");function Oe(){}Oe.prototype.userAgent="aws-amplify/0.1.x js";var _e=Oe;function Ve(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Je(e,t)}function Ke(e){var t="function"===typeof Map?new Map:void 0;return Ke=function(e){if(null===e||!We(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return qe(e,arguments,Le(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Je(n,e)},Ke(e)}function qe(e,t,n){return qe=He()?Reflect.construct:function(e,t,n){var s=[null];s.push.apply(s,t);var i=Function.bind.apply(e,s),r=new i;return n&&Je(r,n.prototype),r},qe.apply(null,arguments)}function He(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function We(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function Je(e,t){return Je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Je(e,t)}function Le(e){return Le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Le(e)}var je=function(e){function t(t,n,s,i){var r;return r=e.call(this,t)||this,r.code=n,r.name=s,r.statusCode=i,r}return Ve(t,e),t}(Ke(Error)),Ge=function(){function e(e,t,n){this.endpoint=t||"https://cognito-idp."+e+".amazonaws.com/";var s=n||{},i=s.credentials;this.fetchOptions=i?{credentials:i}:{}}var t=e.prototype;return t.promisifyRequest=function(e,t){var n=this;return new Promise((function(s,i){n.request(e,t,(function(e,t){e?i(new je(e.message,e.code,e.name,e.statusCode)):s(t)}))}))},t.request=function(e,t,n){var s,i={"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+e,"X-Amz-User-Agent":_e.prototype.userAgent},r=Object.assign({},this.fetchOptions,{headers:i,method:"POST",mode:"cors",cache:"no-cache",body:JSON.stringify(t)});fetch(this.endpoint,r).then((function(e){return s=e,e}),(function(e){if(e instanceof TypeError)throw new Error("Network error");throw e})).then((function(e){return e.json()["catch"]((function(){return{}}))})).then((function(e){if(s.ok)return n(null,e);e;var t=(e.__type||e.code).split("#").pop(),i={code:t,name:t,message:e.message||e.Message||null};return n(i)}))["catch"]((function(e){if(!(s&&s.headers&&s.headers.get("x-amzn-errortype"))){if(e instanceof Error&&"Network error"===e.message){var t={code:"NetworkError",name:e.name,message:e.message};return n(t)}return n(e)}try{var i=s.headers.get("x-amzn-errortype").split(":")[0],r={code:i,name:i,statusCode:s.status,message:s.status?s.status.toString():null};return n(r)}catch(o){return n(e)}}))},e}(),ze=function(){function e(e,t){var n=e||{},s=n.UserPoolId,i=n.ClientId,r=n.endpoint,o=n.fetchOptions,a=n.AdvancedSecurityDataCollectionFlag;if(!s||!i)throw new Error("Both UserPoolId and ClientId are required.");if(!/^[\w-]+_.+$/.test(s))throw new Error("Invalid UserPoolId format.");var u=s.split("_")[0];this.userPoolId=s,this.clientId=i,this.client=new Ge(u,r,o),this.advancedSecurityDataCollectionFlag=!1!==a,this.storage=e.Storage||(new Me).getStorage(),t&&(this.wrapRefreshSessionCallback=t)}var t=e.prototype;return t.getUserPoolId=function(){return this.userPoolId},t.getClientId=function(){return this.clientId},t.signUp=function(e,t,n,s,i,r){var o=this,a={ClientId:this.clientId,Username:e,Password:t,UserAttributes:n,ValidationData:s,ClientMetadata:r};this.getUserContextData(e)&&(a.UserContextData=this.getUserContextData(e)),this.client.request("SignUp",a,(function(t,n){if(t)return i(t,null);var s={Username:e,Pool:o,Storage:o.storage},r={user:new xe(s),userConfirmed:n.UserConfirmed,userSub:n.UserSub,codeDeliveryDetails:n.CodeDeliveryDetails};return i(null,r)}))},t.getCurrentUser=function(){var e="CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser",t=this.storage.getItem(e);if(t){var n={Username:t,Pool:this,Storage:this.storage};return new xe(n)}return null},t.getUserContextData=function(e){if("undefined"!==typeof AmazonCognitoAdvancedSecurityData){var t=AmazonCognitoAdvancedSecurityData;if(this.advancedSecurityDataCollectionFlag){var n=t.getData(e,this.userPoolId,this.clientId);if(n){var s={EncodedData:n};return s}}return{}}},e}(),Ye=n("a78e"),Ze=function(){function e(e){if(!e.domain)throw new Error("The domain of cookieStorage can not be undefined.");if(this.domain=e.domain,e.path?this.path=e.path:this.path="/",Object.prototype.hasOwnProperty.call(e,"expires")?this.expires=e.expires:this.expires=365,Object.prototype.hasOwnProperty.call(e,"secure")?this.secure=e.secure:this.secure=!0,Object.prototype.hasOwnProperty.call(e,"sameSite")){if(!["strict","lax","none"].includes(e.sameSite))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if("none"===e.sameSite&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=e.sameSite}else this.sameSite=null}var t=e.prototype;return t.setItem=function(e,t){var n={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(n.sameSite=this.sameSite),Ye["set"](e,t,n),Ye["get"](e)},t.getItem=function(e){return Ye["get"](e)},t.removeItem=function(e){var t={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(t.sameSite=this.sameSite),Ye["remove"](e,t)},t.clear=function(){for(var e=Ye["get"](),t=Object.keys(e).length,n=0;n<t;++n)this.removeItem(Object.keys(e)[n]);return{}},e}()},e706:function(e,t,n){"use strict";(function(e){var s;if(n.d(t,"a",(function(){return i})),"undefined"!==typeof window&&window.crypto&&(s=window.crypto),!s&&"undefined"!==typeof window&&window.msCrypto&&(s=window.msCrypto),!s&&"undefined"!==typeof e&&e.crypto&&(s=e.crypto),!s)try{s=n(2)}catch(r){}function i(){if(s){if("function"===typeof s.getRandomValues)try{return s.getRandomValues(new Uint32Array(1))[0]}catch(r){}if("function"===typeof s.randomBytes)try{return s.randomBytes(4).readInt32LE()}catch(r){}}throw new Error("Native crypto module could not be used to get secure random number.")}}).call(this,n("c8ba"))}}]);